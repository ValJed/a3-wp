{# modules/article-page/views/index.html #}

{% extends "layout.html" %}
{% import '@apostrophecms/pager:macros.html' as pager with context %}

{% block main %}
  // HERE: relationships of relationships are available here
  // third has _second relationships that has itself _first relationships
  {{ apos.log(data.pieces[0]._second[0]._first) }}
  <h1>{{ data.page.title }}</h1>

  {% for third in data.pieces %}
    <article>
  <h2>{{ third.title }}</h2>
      <h3>Second Relationships</h3>
      <ul>
        {% for second in third._second %}
          <li>
            {{ second.title }}
            <h4>First Relationships</h4>
            <ul>
              {% for first in second._first %}
                <li>
                  <h4>{{ first.title }}</h4>
                </li>
              {% endfor %}
          </li>
        {% endfor %}
      </ul>
    </article>
  {% endfor %}

  {{ pager.render({
    page: data.currentPage,
    total: data.totalPages,
    class: 'blog-pager'
  }, data.url) }}
{% endblock %}

